# ๐ ุฏููู ุงููุดุฑูุน ุงูุดุงูู ุจุงูุนุฑุจูุฉ - ูููุจุชุฏุฆูู

## ๐ฏ ููุฏูุฉ

ูุฑุญุจุงู! ูุฐุง ุฏููู ุดุงูู ูููู ูุดุฑูุน **E-Commerce Backend API** ุงููุจูู ุจู Express.js ู MongoDB.

---

## ๐ ููุฑุณ ุงููุญุชููุงุช

1. [ูุง ูู ุงููุดุฑูุนุ](#ูุง-ูู-ุงููุดุฑูุน)
2. [ูููู ุงููุดุฑูุน](#ูููู-ุงููุดุฑูุน)
3. [ููู ูุนูู ุงููุดุฑูุนุ](#ููู-ูุนูู-ุงููุดุฑูุน)
4. [ุดุฑุญ ุงููููุงุช ุงูุฑุฆูุณูุฉ](#ุดุฑุญ-ุงููููุงุช-ุงูุฑุฆูุณูุฉ)
5. [ุดุฑุญ ุงููุฌูุฏุงุช](#ุดุฑุญ-ุงููุฌูุฏุงุช)
6. [ุชุฏูู ุงูุจูุงูุงุช](#ุชุฏูู-ุงูุจูุงูุงุช)
7. [ุงูู APIs ุงููุชุงุญุฉ](#ุงูู-apis-ุงููุชุงุญุฉ)
8. [ููู ุชุจุฏุฃุ](#ููู-ุชุจุฏุฃ)

---

## ๐ฏ ูุง ูู ุงููุดุฑูุนุ

ูุฐุง ูุดุฑูุน **Backend API** ููุชุฌุฑ ุฅููุชุฑููู (E-Commerce) ูููุฑ:

### ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ:
- โ **ูุธุงู ุงููุณุชุฎุฏููู**: ุชุณุฌููุ ุฏุฎููุ ุฅุฏุงุฑุฉ ุงูุญุณุงุจ
- โ **ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช**: ุฅุถุงูุฉุ ุชุนุฏููุ ุญุฐูุ ุนุฑุถ ุงูููุชุฌุงุช
- โ **ุณูุฉ ุงูุชุณูู**: ุฅุถุงูุฉ ููุชุฌุงุช ููุณูุฉ
- โ **ุงูุทูุจุงุช**: ุฅูุดุงุก ูุฅุฏุงุฑุฉ ุงูุทูุจุงุช
- โ **ุงููุฏููุนุงุช**: ุงูุชูุงูู ูุน Stripe
- โ **ุงูุฃูุงู**: JWT tokensุ ุชุดููุฑ ูููุงุช ุงููุฑูุฑ
- โ **ุฑูุน ุงูุตูุฑ**: ููููุชุฌุงุช ูุงููุณุชุฎุฏููู

---

## ๐ ูููู ุงููุดุฑูุน

```
ecommerce-backend/
โ
โโโ server.js                 # ููุทุฉ ุงูุจุฏุงูุฉ - ูุดุบู ุงูุณูุฑูุฑ
โโโ package.json              # ูุนูููุงุช ุงููุดุฑูุน ูุงูููุชุจุงุช
โโโ .env                      # ุงููุชุบูุฑุงุช ุงูุณุฑูุฉ (ูุงุนุฏุฉ ุงูุจูุงูุงุชุ ุงูููุงุชูุญ)
โ
โโโ src/                      # ูู ุงูููุฏ ุงูุฑุฆูุณู ููุง
โ   โโโ app.js               # ุฅุนุฏุงุฏ Express ูุงูู Middleware
โ   โ
โ   โโโ config/              # ุงูุฅุนุฏุงุฏุงุช
โ   โ   โโโ database.js      # ุงูุงุชุตุงู ุจู MongoDB
โ   โ   โโโ redis.js         # ุฅุนุฏุงุฏ Redis ููู Cache
โ   โ   โโโ stripe.js        # ุฅุนุฏุงุฏ Stripe ููุฏูุน
โ   โ
โ   โโโ models/              # ููุงุฐุฌ ูุงุนุฏุฉ ุงูุจูุงูุงุช (Schemas)
โ   โ   โโโ User.js          # ูููุฐุฌ ุงููุณุชุฎุฏู
โ   โ   โโโ Product.js       # ูููุฐุฌ ุงูููุชุฌ
โ   โ   โโโ Order.js         # ูููุฐุฌ ุงูุทูุจ
โ   โ   โโโ Cart.js          # ูููุฐุฌ ุงูุณูุฉ
โ   โ
โ   โโโ controllers/         # ุงูููุทู ุงูุฑุฆูุณู (Business Logic)
โ   โ   โโโ authController.js    # ุชุณุฌููุ ุฏุฎููุ ุฎุฑูุฌ
โ   โ   โโโ userController.js    # ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
โ   โ   โโโ productController.js # ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช
โ   โ   โโโ cartController.js    # ุฅุฏุงุฑุฉ ุงูุณูุฉ
โ   โ   โโโ orderController.js   # ุฅุฏุงุฑุฉ ุงูุทูุจุงุช
โ   โ
โ   โโโ routes/              # ุงููุณุงุฑุงุช (URLs)
โ   โ   โโโ authRoutes.js    # /api/auth/*
โ   โ   โโโ userRoutes.js    # /api/users/*
โ   โ   โโโ productRoutes.js # /api/products/*
โ   โ   โโโ cartRoutes.js    # /api/cart/*
โ   โ   โโโ orderRoutes.js   # /api/orders/*
โ   โ
โ   โโโ middleware/          # ุงููุณุงุฆุท (ุชุนูู ูุจู ุงูู Controllers)
โ   โ   โโโ auth.js          # ุงูุชุญูู ูู ุชุณุฌูู ุงูุฏุฎูู
โ   โ   โโโ errorHandler.js  # ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
โ   โ   โโโ validator.js     # ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
โ   โ   โโโ upload.js        # ุฑูุน ุงููููุงุช
โ   โ
โ   โโโ services/            # ุฎุฏูุงุช ุฎุงุฑุฌูุฉ
โ   โ   โโโ emailService.js  # ุฅุฑุณุงู ุงูุฅููููุงุช
โ   โ   โโโ paymentService.js # ุงูุฏูุน ุนุจุฑ Stripe
โ   โ   โโโ cacheService.js  # ุงูุชุฎุฒูู ุงููุคูุช
โ   โ
โ   โโโ utils/               # ุฃุฏูุงุช ูุณุงุนุฏุฉ
โ       โโโ logger.js        # ุชุณุฌูู ุงูุฃุญุฏุงุซ
โ       โโโ ApiError.js      # ุฃุฎุทุงุก ูุฎุตุตุฉ
โ       โโโ helpers.js       # ุฏูุงู ูุณุงุนุฏุฉ
โ
โโโ postman/                 # ูููุงุช Postman ููุงุฎุชุจุงุฑ
โ   โโโ E-Commerce-API.postman_collection.json
โ
โโโ tests/                   # ุงูุงุฎุชุจุงุฑุงุช
โ   โโโ unit/               # ุงุฎุชุจุงุฑุงุช ุงููุญุฏุงุช
โ   โโโ integration/        # ุงุฎุชุจุงุฑุงุช ุงูุชูุงูู
โ   โโโ e2e/                # ุงุฎุชุจุงุฑุงุช ุดุงููุฉ
โ
โโโ uploads/                # ุงููููุงุช ุงููุฑููุนุฉ (ุตูุฑ)
```

---

## ๐ ููู ูุนูู ุงููุดุฑูุนุ

### 1๏ธโฃ **ุชุดุบูู ุงูุณูุฑูุฑ** (server.js)

```javascript
// 1. ุชุญููู ุงููุชุบูุฑุงุช ูู .env
require('dotenv').config();

// 2. ุงุณุชูุฑุงุฏ ุงูุชุทุจูู
const app = require('./src/app');

// 3. ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
connectDB();

// 4. ุชุดุบูู ุงูุณูุฑูุฑ ุนูู ุงููููุฐ 5000
app.listen(5000);
```

**ุงูุดุฑุญ:**
- ูุจุฏุฃ ุงูุณูุฑูุฑ ุนูู `http://localhost:5000`
- ูุชุตู ุจูุงุนุฏุฉ ุจูุงูุงุช MongoDB
- ูุณุชูุน ููุทูุจุงุช ุงููุงุฑุฏุฉ

---

### 2๏ธโฃ **ุฅุนุฏุงุฏ ุงูุชุทุจูู** (src/app.js)

```javascript
const express = require('express');
const app = express();

// Middleware ููุฃูุงู
app.use(helmet());        // ุญูุงูุฉ Headers
app.use(cors());          // ุงูุณูุงุญ ุจุงูุทูุจุงุช ูู ููุงูุน ุฃุฎุฑู
app.use(compression());   // ุถุบุท ุงูุงุณุชุฌุงุจุงุช

// Middleware ููุนุงูุฌุฉ ุงูุจูุงูุงุช
app.use(express.json());  // ูุฑุงุกุฉ JSON ูู ุงูุทูุจุงุช

// ุงููุณุงุฑุงุช (Routes)
app.use('/api/auth', authRoutes);
app.use('/api/users', userRoutes);
app.use('/api/products', productRoutes);
app.use('/api/cart', cartRoutes);
app.use('/api/orders', orderRoutes);

// ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
app.use(errorHandler);
```

**ุงูุดุฑุญ:**
- ููุนุฏ Express ููุนูู
- ูุถูู ุทุจูุงุช ุงูุฃูุงู
- ูุฑุจุท ุงููุณุงุฑุงุช ุจุงูู Controllers

---

## ๐ ุดุฑุญ ุงููููุงุช ุงูุฑุฆูุณูุฉ

### ๐ **server.js** - ููุทุฉ ุงูุจุฏุงูุฉ

**ุงููุธููุฉ:** ูุดุบู ุงูุณูุฑูุฑ ููุชุตู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช

```javascript
// ูุง ูุญุฏุซ ุนูุฏ ุชุดุบูู npm run dev:

1. ุชุญููู ุงููุชุบูุฑุงุช ูู .env
2. ุงูุงุชุตุงู ุจู MongoDB
3. ุชุดุบูู ุงูุณูุฑูุฑ ุนูู ุงููููุฐ 5000
4. ุงูุงุณุชูุงุน ููุทูุจุงุช
```

---

### ๐ **src/app.js** - ุฅุนุฏุงุฏ Express

**ุงููุธููุฉ:** ููุนุฏ ุงูุชุทุจูู ููุถูู Middleware

**Middleware ุงููุณุชุฎุฏู:**
- `helmet()` - ุญูุงูุฉ ูู ูุฌูุงุช XSS
- `cors()` - ุงูุณูุงุญ ููู Frontend ุจุงูุงุชุตุงู
- `express.json()` - ูุฑุงุกุฉ JSON
- `morgan()` - ุชุณุฌูู ุงูุทูุจุงุช
- `rateLimit()` - ููุน ุงููุฌูุงุช (Rate Limiting)

---

### ๐ **package.json** - ูุนูููุงุช ุงููุดุฑูุน

**ุงูููุชุจุงุช ุงูุฑุฆูุณูุฉ:**

| ุงูููุชุจุฉ | ุงูุงุณุชุฎุฏุงู |
|---------|-----------|
| `express` | ุฅุทุงุฑ ุนูู ุงูู Backend |
| `mongoose` | ุงูุชุนุงูู ูุน MongoDB |
| `bcryptjs` | ุชุดููุฑ ูููุงุช ุงููุฑูุฑ |
| `jsonwebtoken` | ุฅูุดุงุก JWT Tokens |
| `joi` | ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช |
| `multer` | ุฑูุน ุงููููุงุช |
| `stripe` | ูุนุงูุฌุฉ ุงููุฏููุนุงุช |
| `nodemailer` | ุฅุฑุณุงู ุงูุฅููููุงุช |
| `redis` | ุงูุชุฎุฒูู ุงููุคูุช (Cache) |
| `winston` | ุชุณุฌูู ุงูุฃุญุฏุงุซ (Logging) |

---

## ๐ ุดุฑุญ ุงููุฌูุฏุงุช ุจุงูุชูุตูู

### 1๏ธโฃ **src/config/** - ุงูุฅุนุฏุงุฏุงุช

#### **database.js** - ุงูุงุชุตุงู ุจู MongoDB
```javascript
const mongoose = require('mongoose');

const connectDB = async () => {
  await mongoose.connect(process.env.MONGODB_URI);
  console.log('โ ูุชุตู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช');
};
```

**ุงูุดุฑุญ:**
- ููุฑุฃ ุฑุงุจุท ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู `.env`
- ูุชุตู ุจู MongoDB
- ูุนุฑุถ ุฑุณุงูุฉ ูุฌุงุญ

---

### 2๏ธโฃ **src/models/** - ููุงุฐุฌ ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### **User.js** - ูููุฐุฌ ุงููุณุชุฎุฏู
```javascript
const userSchema = new Schema({
  name: String,           // ุงูุงุณู
  email: String,          // ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (ูุฑูุฏ)
  password: String,       // ูููุฉ ุงููุฑูุฑ (ูุดูุฑุฉ)
  role: String,           // ุงูุฏูุฑ: user ุฃู admin
  addresses: [],          // ุงูุนูุงููู
  avatar: String          // ุตูุฑุฉ ุงูููู ุงูุดุฎุตู
});
```

**ุงูุดุฑุญ:**
- ูุญุฏุฏ ุดูู ุจูุงูุงุช ุงููุณุชุฎุฏู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ูููุฉ ุงููุฑูุฑ ุชูุดูุฑ ุชููุงุฆูุงู ูุจู ุงูุญูุธ

#### **Product.js** - ูููุฐุฌ ุงูููุชุฌ
```javascript
const productSchema = new Schema({
  name: String,           // ุงุณู ุงูููุชุฌ
  description: String,    // ุงููุตู
  price: Number,          // ุงูุณุนุฑ
  category: String,       // ุงููุฆุฉ
  stock: Number,          // ุงููููุฉ ุงููุชููุฑุฉ
  images: [],             // ุงูุตูุฑ
  brand: String,          // ุงูุนูุงูุฉ ุงูุชุฌุงุฑูุฉ
  sku: String,            // ุฑูุฒ ุงูููุชุฌ (ูุฑูุฏ)
  isFeatured: Boolean     // ููุชุฌ ูููุฒุ
});
```

#### **Order.js** - ูููุฐุฌ ุงูุทูุจ
```javascript
const orderSchema = new Schema({
  user: ObjectId,              // ุงููุณุชุฎุฏู
  items: [],                   // ุงูููุชุฌุงุช ุงููุทููุจุฉ
  totalPrice: Number,          // ุงูุณุนุฑ ุงูุฅุฌูุงูู
  status: String,              // ุงูุญุงูุฉ: pending, shipped, delivered
  shippingAddress: {},         // ุนููุงู ุงูุดุญู
  paymentMethod: String,       // ุทุฑููุฉ ุงูุฏูุน
  orderNumber: String          // ุฑูู ุงูุทูุจ
});
```

---

### 3๏ธโฃ **src/controllers/** - ุงูููุทู ุงูุฑุฆูุณู

#### **authController.js** - ุงูุชุญูู ูู ุงููููุฉ

**ุงููุธุงุฆู:**
```javascript
// 1. ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ
register(req, res) {
  // 1. ุงุณุชูุจุงู ุงูุจูุงูุงุช (name, email, password)
  // 2. ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
  // 3. ุชุดููุฑ ูููุฉ ุงููุฑูุฑ
  // 4. ุญูุธ ุงููุณุชุฎุฏู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
  // 5. ุฅูุดุงุก JWT Token
  // 6. ุฅุฑุณุงู ุงูุงุณุชุฌุงุจุฉ
}

// 2. ุชุณุฌูู ุงูุฏุฎูู
login(req, res) {
  // 1. ุงุณุชูุจุงู email ู password
  // 2. ุงูุจุญุซ ุนู ุงููุณุชุฎุฏู
  // 3. ููุงุฑูุฉ ูููุฉ ุงููุฑูุฑ
  // 4. ุฅูุดุงุก JWT Token
  // 5. ุฅุฑุณุงู Token ูููุณุชุฎุฏู
}

// 3. ุชุณุฌูู ุงูุฎุฑูุฌ
logout(req, res) {
  // 1. ุฅูุบุงุก Token
  // 2. ุชุณุฌูู ุงูุฎุฑูุฌ
}
```

#### **productController.js** - ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช

**ุงููุธุงุฆู:**
```javascript
// 1. ุนุฑุถ ุฌููุน ุงูููุชุฌุงุช
getAllProducts(req, res) {
  // 1. ูุฑุงุกุฉ ุงูููุชุฌุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
  // 2. ุชุทุจูู ุงูููุงุชุฑ (category, price, search)
  // 3. ุงูุชุฑุชูุจ ูุงูุตูุญุงุช (pagination)
  // 4. ุฅุฑุณุงู ุงููุชุงุฆุฌ
}

// 2. ุนุฑุถ ููุชุฌ ูุงุญุฏ
getProductById(req, res) {
  // 1. ูุฑุงุกุฉ ID ูู URL
  // 2. ุงูุจุญุซ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
  // 3. ุฅุฑุณุงู ุงูููุชุฌ
}

// 3. ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ (Admin ููุท)
createProduct(req, res) {
  // 1. ุงูุชุญูู ูู ุตูุงุญูุงุช Admin
  // 2. ุงุณุชูุจุงู ุงูุจูุงูุงุช
  // 3. ุฑูุน ุงูุตูุฑ
  // 4. ุญูุธ ุงูููุชุฌ
  // 5. ุฅุฑุณุงู ุงูุงุณุชุฌุงุจุฉ
}

// 4. ุชุนุฏูู ููุชุฌ
updateProduct(req, res) {
  // 1. ุงูุจุญุซ ุนู ุงูููุชุฌ
  // 2. ุชุญุฏูุซ ุงูุจูุงูุงุช
  // 3. ุญูุธ ุงูุชุบููุฑุงุช
}

// 5. ุญุฐู ููุชุฌ
deleteProduct(req, res) {
  // 1. ุงูุจุญุซ ุนู ุงูููุชุฌ
  // 2. ุญุฐูู (soft delete)
}
```

#### **cartController.js** - ุฅุฏุงุฑุฉ ุงูุณูุฉ

**ุงููุธุงุฆู:**
```javascript
// 1. ุนุฑุถ ุงูุณูุฉ
getCart(req, res) {
  // 1. ุงูุจุญุซ ุนู ุณูุฉ ุงููุณุชุฎุฏู
  // 2. ุญุณุงุจ ุงูุณุนุฑ ุงูุฅุฌูุงูู
  // 3. ุฅุฑุณุงู ุงูุณูุฉ
}

// 2. ุฅุถุงูุฉ ููุชุฌ ููุณูุฉ
addToCart(req, res) {
  // 1. ุงุณุชูุจุงู productId ู quantity
  // 2. ุงูุชุญูู ูู ุชููุฑ ุงูููุชุฌ
  // 3. ุฅุถุงูุฉ ููุณูุฉ ุฃู ุฒูุงุฏุฉ ุงููููุฉ
  // 4. ุญุณุงุจ ุงูุณุนุฑ ุงูุฌุฏูุฏ
}

// 3. ุชุญุฏูุซ ูููุฉ ููุชุฌ
updateCartItem(req, res) {
  // 1. ุชุญุฏูุซ ุงููููุฉ
  // 2. ุฅุนุงุฏุฉ ุญุณุงุจ ุงูุณุนุฑ
}

// 4. ุญุฐู ููุชุฌ ูู ุงูุณูุฉ
removeFromCart(req, res) {
  // 1. ุญุฐู ุงูููุชุฌ
  // 2. ุฅุนุงุฏุฉ ุญุณุงุจ ุงูุณุนุฑ
}

// 5. ูุณุญ ุงูุณูุฉ
clearCart(req, res) {
  // 1. ุญุฐู ุฌููุน ุงูููุชุฌุงุช
}
```

#### **orderController.js** - ุฅุฏุงุฑุฉ ุงูุทูุจุงุช

**ุงููุธุงุฆู:**
```javascript
// 1. ุฅูุดุงุก ุทูุจ ุฌุฏูุฏ
createOrder(req, res) {
  // 1. ุงูุชุญูู ูู ุงูุณูุฉ (ููุณุช ูุงุฑุบุฉ)
  // 2. ุงูุชุญูู ูู ุชููุฑ ุงูููุชุฌุงุช
  // 3. ุฅูุดุงุก ุฑูู ุทูุจ ูุฑูุฏ
  // 4. ุญูุธ ุงูุทูุจ
  // 5. ูุณุญ ุงูุณูุฉ
  // 6. ุฅุฑุณุงู ุฅูููู ุชุฃููุฏ
}

// 2. ุนุฑุถ ุทูุจุงุช ุงููุณุชุฎุฏู
getMyOrders(req, res) {
  // 1. ุงูุจุญุซ ุนู ุทูุจุงุช ุงููุณุชุฎุฏู
  // 2. ุงูุชุฑุชูุจ ุญุณุจ ุงูุชุงุฑูุฎ
  // 3. ุฅุฑุณุงู ุงููุชุงุฆุฌ
}

// 3. ุนุฑุถ ุทูุจ ูุงุญุฏ
getOrderById(req, res) {
  // 1. ุงูุจุญุซ ุนู ุงูุทูุจ
  // 2. ุงูุชุญูู ูู ุงูุตูุงุญูุงุช
  // 3. ุฅุฑุณุงู ุงูุทูุจ
}

// 4. ุฅูุบุงุก ุทูุจ
cancelOrder(req, res) {
  // 1. ุงูุชุญูู ูู ุญุงูุฉ ุงูุทูุจ
  // 2. ุฅุนุงุฏุฉ ุงูููุชุฌุงุช ูููุฎุฒูู
  // 3. ุชุญุฏูุซ ุงูุญุงูุฉ ุฅูู cancelled
}

// 5. ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ (Admin)
updateOrderStatus(req, res) {
  // 1. ุชุญุฏูุซ ุงูุญุงูุฉ
  // 2. ุฅุฑุณุงู ุฅูููู ูููุณุชุฎุฏู
}
```

---

### 4๏ธโฃ **src/routes/** - ุงููุณุงุฑุงุช

#### **authRoutes.js**
```javascript
POST   /api/auth/register        // ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ
POST   /api/auth/login           // ุชุณุฌูู ุงูุฏุฎูู
POST   /api/auth/logout          // ุชุณุฌูู ุงูุฎุฑูุฌ
POST   /api/auth/refresh         // ุชุฌุฏูุฏ Token
POST   /api/auth/forgot-password // ูุณูุช ูููุฉ ุงููุฑูุฑ
POST   /api/auth/reset-password  // ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ
```

#### **productRoutes.js**
```javascript
GET    /api/products             // ุนุฑุถ ุฌููุน ุงูููุชุฌุงุช
GET    /api/products/featured    // ุงูููุชุฌุงุช ุงููููุฒุฉ
GET    /api/products/:id         // ุนุฑุถ ููุชุฌ ูุงุญุฏ
POST   /api/products             // ุฅุถุงูุฉ ููุชุฌ (Admin)
PUT    /api/products/:id         // ุชุนุฏูู ููุชุฌ (Admin)
DELETE /api/products/:id         // ุญุฐู ููุชุฌ (Admin)
POST   /api/products/:id/reviews // ุฅุถุงูุฉ ุชูููู
```

#### **cartRoutes.js**
```javascript
GET    /api/cart                 // ุนุฑุถ ุงูุณูุฉ
POST   /api/cart                 // ุฅุถุงูุฉ ููุชุฌ
PUT    /api/cart/:itemId         // ุชุญุฏูุซ ูููุฉ
DELETE /api/cart/:itemId         // ุญุฐู ููุชุฌ
DELETE /api/cart                 // ูุณุญ ุงูุณูุฉ
```

#### **orderRoutes.js**
```javascript
POST   /api/orders               // ุฅูุดุงุก ุทูุจ
GET    /api/orders               // ุทูุจุงุช ุงููุณุชุฎุฏู
GET    /api/orders/:id           // ุนุฑุถ ุทูุจ ูุงุญุฏ
PUT    /api/orders/:id/cancel    // ุฅูุบุงุก ุทูุจ
PUT    /api/orders/:id/status    // ุชุญุฏูุซ ุงูุญุงูุฉ (Admin)
GET    /api/orders/admin/all     // ุฌููุน ุงูุทูุจุงุช (Admin)
```

---

### 5๏ธโฃ **src/middleware/** - ุงููุณุงุฆุท

#### **auth.js** - ุงูุชุญูู ูู ุชุณุฌูู ุงูุฏุฎูู
```javascript
// ูุนูู ูุจู ูู Controller ูุญุชุงุฌ ุชุณุฌูู ุฏุฎูู

protect(req, res, next) {
  // 1. ูุฑุงุกุฉ Token ูู Header
  // 2. ุงูุชุญูู ูู ุตุญุฉ Token
  // 3. ุงุณุชุฎุฑุงุฌ ุจูุงูุงุช ุงููุณุชุฎุฏู
  // 4. ุฅุถุงูุฉ ุงููุณุชุฎุฏู ุฅูู req.user
  // 5. ุงูุณูุงุญ ุจุงููุชุงุจุนุฉ
}

// ุงูุชุญูู ูู ุตูุงุญูุงุช Admin
restrictTo('admin')(req, res, next) {
  // 1. ุงูุชุญูู ูู role ุงููุณุชุฎุฏู
  // 2. ุงูุณูุงุญ ุฃู ุงูุฑูุถ
}
```

#### **validator.js** - ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
```javascript
// ูุณุชุฎุฏู Joi ููุชุญูู

validateRegister(req, res, next) {
  // 1. ุงูุชุญูู ูู name, email, password
  // 2. ุฅุฐุง ุตุญูุญ: ุงููุชุงุจุนุฉ
  // 3. ุฅุฐุง ุฎุทุฃ: ุฅุฑุณุงู ุฑุณุงูุฉ ุฎุทุฃ
}

validateProduct(req, res, next) {
  // ุงูุชุญูู ูู ุจูุงูุงุช ุงูููุชุฌ
}
```

#### **errorHandler.js** - ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
```javascript
errorHandler(err, req, res, next) {
  // 1. ุชุณุฌูู ุงูุฎุทุฃ ูู logger
  // 2. ุชุญุฏูุฏ ููุน ุงูุฎุทุฃ
  // 3. ุฅุฑุณุงู ุงุณุชุฌุงุจุฉ ููุงุณุจุฉ
}
```

---

### 6๏ธโฃ **src/services/** - ุงูุฎุฏูุงุช

#### **emailService.js** - ุฅุฑุณุงู ุงูุฅููููุงุช
```javascript
sendWelcomeEmail(user) {
  // ุฅุฑุณุงู ุฅูููู ุชุฑุญูุจ
}

sendOrderConfirmation(order) {
  // ุฅุฑุณุงู ุชุฃููุฏ ุงูุทูุจ
}

sendPasswordReset(user, token) {
  // ุฅุฑุณุงู ุฑุงุจุท ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ
}
```

#### **paymentService.js** - ุงููุฏููุนุงุช
```javascript
createPaymentIntent(amount) {
  // ุฅูุดุงุก ููุฉ ุฏูุน ูู Stripe
}

processPayment(paymentMethod, amount) {
  // ูุนุงูุฌุฉ ุงูุฏูุน
}
```

#### **cacheService.js** - ุงูุชุฎุฒูู ุงููุคูุช
```javascript
get(key) {
  // ูุฑุงุกุฉ ูู Redis
}

set(key, value, ttl) {
  // ุญูุธ ูู Redis
}

del(key) {
  // ุญุฐู ูู Redis
}
```

---

## ๐ ุชุฏูู ุงูุจูุงูุงุช (Data Flow)

### ูุซุงู: ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ

```
1. ุงููุณุชุฎุฏู ูุฑุณู ุทูุจ POST
   โ
2. Express ูุณุชูุจู ุงูุทูุจ
   โ
3. Middleware: validator.js
   - ูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
   โ
4. Controller: authController.register
   - ูุดูุฑ ูููุฉ ุงููุฑูุฑ
   - ูุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
   - ููุดุฆ JWT Token
   โ
5. Service: emailService
   - ูุฑุณู ุฅูููู ุชุฑุญูุจ
   โ
6. Response: ูุฑุณู Token ูููุณุชุฎุฏู
```

### ูุซุงู: ุฅุถุงูุฉ ููุชุฌ ููุณูุฉ

```
1. ุงููุณุชุฎุฏู ูุฑุณู POST /api/cart
   โ
2. Middleware: auth.protect
   - ูุชุญูู ูู Token
   - ูุถูู ุงููุณุชุฎุฏู ุฅูู req.user
   โ
3. Middleware: validator
   - ูุชุญูู ูู productId ู quantity
   โ
4. Controller: cartController.addToCart
   - ูุจุญุซ ุนู ุงูููุชุฌ
   - ูุชุญูู ูู ุงููุฎุฒูู
   - ูุถูู ููุณูุฉ
   - ูุญุณุจ ุงูุณุนุฑ
   โ
5. Response: ูุฑุณู ุงูุณูุฉ ุงููุญุฏุซุฉ
```

---

## ๐ ุงูู APIs ุงููุชุงุญุฉ

### ๐ **Authentication APIs**

#### 1. ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ
```
POST /api/auth/register

Body:
{
  "name": "ุฃุญูุฏ ูุญูุฏ",
  "email": "ahmed@example.com",
  "password": "123456",
  "phone": "+966501234567"
}

Response:
{
  "status": "success",
  "data": {
    "user": { ... },
    "token": "eyJhbGc..."
  }
}
```

#### 2. ุชุณุฌูู ุงูุฏุฎูู
```
POST /api/auth/login

Body:
{
  "email": "ahmed@example.com",
  "password": "123456"
}

Response:
{
  "status": "success",
  "data": {
    "user": { ... },
    "token": "eyJhbGc..."
  }
}
```

---

### ๐ฆ **Products APIs**

#### 1. ุนุฑุถ ุฌููุน ุงูููุชุฌุงุช
```
GET /api/products?page=1&limit=10&category=electronics

Response:
{
  "status": "success",
  "data": {
    "products": [ ... ],
    "pagination": {
      "total": 50,
      "page": 1,
      "pages": 5
    }
  }
}
```

#### 2. ุฅุถุงูุฉ ููุชุฌ (Admin ููุท)
```
POST /api/products
Headers: Authorization: Bearer <admin_token>

Body:
{
  "name": "ูุงุจุชูุจ HP",
  "description": "ูุงุจุชูุจ ููู ููุฃูุนุงุจ",
  "price": 3500,
  "category": "electronics",
  "stock": 10,
  "brand": "HP",
  "sku": "HP-001"
}
```

---

### ๐ **Cart APIs**

#### 1. ุฅุถุงูุฉ ููุชุฌ ููุณูุฉ
```
POST /api/cart
Headers: Authorization: Bearer <token>

Body:
{
  "productId": "507f1f77bcf86cd799439011",
  "quantity": 2
}

Response:
{
  "status": "success",
  "data": {
    "cart": {
      "items": [ ... ],
      "totalPrice": 7000
    }
  }
}
```

---

### ๐ **Orders APIs**

#### 1. ุฅูุดุงุก ุทูุจ
```
POST /api/orders
Headers: Authorization: Bearer <token>

Body:
{
  "shippingAddress": {
    "street": "ุดุงุฑุน ุงูููู ููุฏ",
    "city": "ุงูุฑูุงุถ",
    "state": "ุงูุฑูุงุถ",
    "country": "ุงูุณุนูุฏูุฉ",
    "zipCode": "12345"
  },
  "paymentMethod": "stripe"
}

Response:
{
  "status": "success",
  "data": {
    "order": {
      "orderNumber": "ORD-123456",
      "status": "pending",
      "totalPrice": 7000
    }
  }
}
```

---

## ๐ ููู ุชุจุฏุฃุ

### 1๏ธโฃ **ุชุซุจูุช ุงูููุชุจุงุช**
```bash
npm install
```

### 2๏ธโฃ **ุฅุนุฏุงุฏ ููู .env**
```env
# ูุงุนุฏุฉ ุงูุจูุงูุงุช
MONGODB_URI=mongodb://localhost:27017/ecommerce

# JWT
JWT_SECRET=your-secret-key-here
JWT_EXPIRE=7d

# Stripe
STRIPE_SECRET_KEY=sk_test_...

# Email
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USER=your-email@gmail.com
EMAIL_PASS=your-password

# Redis
REDIS_HOST=localhost
REDIS_PORT=6379
```

### 3๏ธโฃ **ุชุดุบูู ุงูุณูุฑูุฑ**
```bash
npm run dev
```

### 4๏ธโฃ **ุงุฎุชุจุงุฑ ุงูู API**
- ุงูุชุญ Postman
- ุงุณุชูุฑุฏ ููู: `postman/E-Commerce-API.postman_collection.json`
- ุงุจุฏุฃ ุงูุงุฎุชุจุงุฑ!

---

## ๐ ููุงุญุธุงุช ูููุฉ

### โ **ุงูุฃูุงู**
- ูููุงุช ุงููุฑูุฑ **ูุดูุฑุฉ** ุจู bcrypt
- JWT Tokens ููุชุญูู ูู ุงููููุฉ
- Rate Limiting ูููุน ุงููุฌูุงุช
- Helmet ููุญูุงูุฉ ูู XSS

### โ **ุงูุฃุฏุงุก**
- Redis ููุชุฎุฒูู ุงููุคูุช
- Compression ูุถุบุท ุงูุงุณุชุฌุงุจุงุช
- Pagination ููุจูุงูุงุช ุงููุจูุฑุฉ
- Indexing ูู MongoDB

### โ **ุงูุฌูุฏุฉ**
- Validation ุจู Joi
- Error Handling ุดุงูู
- Logging ุจู Winston
- Tests ุจู Jest

---

## ๐ ูุตุงุฆุญ ูููุจุชุฏุฆูู

### 1. **ุงุจุฏุฃ ุจููู ุงูุชุฏูู**
- ุงูุฑุฃ `server.js` ุฃููุงู
- ุซู `src/app.js`
- ุซู `routes` โ `controllers`

### 2. **ุฌุฑุจ ุงูู APIs**
- ุงุณุชุฎุฏู Postman
- ุงุจุฏุฃ ุจู Authentication
- ุซู Products
- ุซู Cart ู Orders

### 3. **ุงูุฑุฃ ุงูููุฏ ุชุฏุฑูุฌูุงู**
- ูุง ุชุญุงูู ููู ูู ุดูุก ุฏูุนุฉ ูุงุญุฏุฉ
- ุฑูุฒ ุนูู ููู ูุงุญุฏ ูู ูู ูุฑุฉ
- ุงุณุชุฎุฏู console.log() ูููู ุงูุชุฏูู

### 4. **ุงุณุชุฎุฏู ุงูููุงุฑุฏ**
- ุงูุฑุฃ `ARABIC_GUIDE.md` (ูุฐุง ุงูููู)
- ุฑุงุฌุน `PLANTUML_DIAGRAMS.md` ูููุฎุทุทุงุช
- ุงุณุชุฎุฏู `FIELD_REFERENCE.md` ููู APIs

---

## ๐ ูุตุงุฏุฑ ุฅุถุงููุฉ

- [Express.js Documentation](https://expressjs.com/)
- [MongoDB Documentation](https://docs.mongodb.com/)
- [Mongoose Documentation](https://mongoosejs.com/)
- [JWT.io](https://jwt.io/)

---

## โจ ุงูุฎูุงุตุฉ

ูุฐุง ุงููุดุฑูุน ูู **Backend API ูุงูู** ููุชุฌุฑ ุฅููุชุฑููู ูุดูู:
- โ ูุธุงู ุงููุณุชุฎุฏููู ูุงูุตูุงุญูุงุช
- โ ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช
- โ ุณูุฉ ุงูุชุณูู
- โ ูุธุงู ุงูุทูุจุงุช
- โ ุงููุฏููุนุงุช
- โ ุงูุฃูุงู ูุงูุฃุฏุงุก

**ุงูุฎุทูุฉ ุงูุชุงููุฉ:** ุงูุฑุฃ ููู `PLANTUML_DIAGRAMS.md` ูุฑุคูุฉ ุงููุฎุทุทุงุช ุงูุจุตุฑูุฉ! ๐จ

---

*ุชู ุฅูุดุงุก ูุฐุง ุงูุฏููู ุฎุตูุตุงู ูููุทูุฑูู ุงููุจุชุฏุฆูู ๐*
